import json
from typing import List

from omegaconf import OmegaConf
from webdriver import ManagerWebdriver, MyWebDriver

odds_api: str = "https://www.sofascore.com/api/v1/event/{match_id}/odds/1/all"

scottish_l2_s25_matchids: List[int] = [
    14035666,
    14035662,
    14035664,
    14035663,
    14035665,
    14035670,
]


mw = ManagerWebdriver()
web = mw.spawn_webdriver()
# web.close()
url = odds_api.format(match_id=scottish_l2_s25_matchids[0])
r = web.get_page(url)

print(json.dumps(r, indent=6))

"""
{
    "markets": [
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 1,
            "marketName": "Full time",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100457051,
            "marketGroup": "1X2",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "31/20",
                    "fractionalValue": "21/20",
                    "sourceId": 1140279530,
                    "name": "1",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "12/5",
                    "fractionalValue": "13/5",
                    "sourceId": 1140279546,
                    "name": "X",
                    "winning": false,
                    "change": 1,
                },
                {
                    "initialFractionalValue": "29/20",
                    "fractionalValue": "2/1",
                    "sourceId": 1140279549,
                    "name": "2",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 2,
            "marketName": "Double chance",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461795,
            "marketGroup": "Double chance",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "8/15",
                    "fractionalValue": "3/10",
                    "sourceId": 1269566897,
                    "name": "1X",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "1/2",
                    "fractionalValue": "8/13",
                    "sourceId": 1269566895,
                    "name": "X2",
                    "winning": true,
                    "change": 1,
                },
                {
                    "initialFractionalValue": "3/10",
                    "fractionalValue": "2/9",
                    "sourceId": 1269566896,
                    "name": "12",
                    "winning": true,
                    "change": -1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 3,
            "marketName": "1st half",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461796,
            "marketGroup": "1X2",
            "marketPeriod": "1st half",
            "choices": [
                {
                    "initialFractionalValue": "11/5",
                    "fractionalValue": "8/5",
                    "sourceId": 1269565717,
                    "name": "1",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "11/10",
                    "fractionalValue": "5/4",
                    "sourceId": 1269565726,
                    "name": "X",
                    "winning": false,
                    "change": 1,
                },
                {
                    "initialFractionalValue": "21/10",
                    "fractionalValue": "5/2",
                    "sourceId": 1269565731,
                    "name": "2",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 4,
            "marketName": "Draw no bet",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461797,
            "marketGroup": "Draw no bet",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "5/6",
                    "fractionalValue": "4/7",
                    "sourceId": 1269565711,
                    "name": "1",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "5/6",
                    "fractionalValue": "5/4",
                    "sourceId": 1269565703,
                    "name": "2",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 5,
            "marketName": "Both teams to score",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461798,
            "marketGroup": "Both teams to score",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "4/5",
                    "fractionalValue": "4/6",
                    "sourceId": 1269567441,
                    "name": "Yes",
                    "winning": true,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "10/11",
                    "fractionalValue": "11/10",
                    "sourceId": 1269567442,
                    "name": "No",
                    "winning": false,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "0.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461807,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "1/33",
                    "fractionalValue": "1/80",
                    "sourceId": 1269567322,
                    "name": "Over",
                    "winning": true,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "9/1",
                    "fractionalValue": "12/1",
                    "sourceId": 1269567323,
                    "name": "Under",
                    "winning": false,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "1.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461806,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "3/10",
                    "fractionalValue": "2/9",
                    "sourceId": 1269567324,
                    "name": "Over",
                    "winning": true,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "12/5",
                    "fractionalValue": "3/1",
                    "sourceId": 1269567315,
                    "name": "Under",
                    "winning": false,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "2.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461801,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "4/5",
                    "fractionalValue": "8/11",
                    "sourceId": 1140279553,
                    "name": "Over",
                    "winning": true,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "1/1",
                    "fractionalValue": "43/40",
                    "sourceId": 1140279561,
                    "name": "Under",
                    "winning": false,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "3.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461805,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "5/2",
                    "fractionalValue": "7/4",
                    "sourceId": 1269567316,
                    "name": "Over",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "2/7",
                    "fractionalValue": "2/5",
                    "sourceId": 1269567325,
                    "name": "Under",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "4.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461804,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "11/2",
                    "fractionalValue": "7/2",
                    "sourceId": 1269567319,
                    "name": "Over",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "1/10",
                    "fractionalValue": "1/6",
                    "sourceId": 1269567317,
                    "name": "Under",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "5.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461803,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "9/1",
                    "fractionalValue": "15/2",
                    "sourceId": 1269567320,
                    "name": "Over",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "1/33",
                    "fractionalValue": "1/20",
                    "sourceId": 1269567318,
                    "name": "Under",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "6.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461802,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "16/1",
                    "fractionalValue": "11/1",
                    "sourceId": 1269567314,
                    "name": "Over",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "1/200",
                    "fractionalValue": "1/66",
                    "sourceId": 1269567321,
                    "name": "Under",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 9,
            "marketName": "Match goals",
            "choiceGroup": "7.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100686310,
            "marketGroup": "Match goals",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "20/1",
                    "fractionalValue": "20/1",
                    "sourceId": 1296004148,
                    "name": "Over",
                    "winning": false,
                    "change": 0,
                },
                {
                    "initialFractionalValue": "1/500",
                    "fractionalValue": "1/500",
                    "sourceId": 1296004147,
                    "name": "Under",
                    "winning": true,
                    "change": 0,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 17,
            "marketName": "Asian handicap",
            "isLive": false,
            "fid": 177582469,
            "suspended": false,
            "id": 2100461800,
            "marketGroup": "Asian Handicap",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "19/20",
                    "fractionalValue": "33/40",
                    "sourceId": 1140279575,
                    "name": "(-0.25) Edinburgh City F.C.",
                    "change": -1,
                },
                {
                    "initialFractionalValue": "17/20",
                    "fractionalValue": "39/40",
                    "sourceId": 1140279586,
                    "name": "(0.25) Stirling Albion",
                    "change": 1,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 2,
            "marketId": 21,
            "marketName": "Corners 2-Way",
            "choiceGroup": "9.5",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100467279,
            "marketGroup": "Corners 2-Way",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "5/6",
                    "fractionalValue": "5/6",
                    "sourceId": 1270583631,
                    "name": "Over",
                    "change": 0,
                },
                {
                    "initialFractionalValue": "5/6",
                    "fractionalValue": "5/6",
                    "sourceId": 1270583632,
                    "name": "Under",
                    "change": 0,
                },
            ],
        },
        {
            "sourceId": 177582468,
            "structureType": 1,
            "marketId": 6,
            "marketName": "First team to score",
            "isLive": false,
            "fid": 177582468,
            "suspended": false,
            "id": 2100461799,
            "marketGroup": "First team to score",
            "marketPeriod": "Full-time",
            "choices": [
                {
                    "initialFractionalValue": "1/1",
                    "fractionalValue": "8/11",
                    "sourceId": 1269565714,
                    "name": "Edinburgh City F.C.",
                    "winning": false,
                    "change": -1,
                },
                {
                    "initialFractionalValue": "9/1",
                    "fractionalValue": "12/1",
                    "sourceId": 1269565712,
                    "name": "No goal",
                    "winning": false,
                    "change": 1,
                },
                {
                    "initialFractionalValue": "20/21",
                    "fractionalValue": "11/10",
                    "sourceId": 1269565713,
                    "name": "Stirling Albion",
                    "winning": true,
                    "change": 1,
                },
            ],
        },
    ],
    "eventId": 14035666,
}
"""
